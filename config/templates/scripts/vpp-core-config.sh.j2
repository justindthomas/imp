#!/usr/bin/env bash
#
# VPP Core Post-Configuration
# Generated by configure-router.py
#
# Configures IPv6 Router Advertisement on interfaces with IPv6 addresses
#

export CMD="vppctl -s /run/vpp/core-cli.sock"

sleep 15

# IPv6 RA configuration for interfaces with IPv6
{% for iface in interfaces %}
{% if iface.ipv6 %}
{% for ra_prefix in iface.ipv6_ra_prefixes %}
$CMD ip6 nd {{ iface.name }} ra-interval 30 15
$CMD ip6 nd {{ iface.name }} prefix {{ ra_prefix }} infinite
$CMD ip6 nd {{ iface.name }} no ra-suppress
{% endfor %}
{% endif %}
{% endfor %}
