#
# VPP NAT Startup Configuration
# Generated by configure-router.py
#

unix {
  nodaemon
  log /var/log/vpp/nat.log
  full-coredump
  cli-listen /run/vpp/nat-cli.sock
  gid vpp
  exec /etc/vpp/commands-nat.txt
}

api-trace {
  on
}

api-segment {
  gid vpp
}

socksvr {
  socket-name /run/vpp/nat-api.sock
  default
}

cpu {
{% if cpu.nat_main > 0 %}
  main-core {{ cpu.nat_main }}
{% endif %}
{% if cpu.nat_workers %}
  corelist-workers {{ cpu.nat_workers }}
{% endif %}
{% if cpu.nat_main == 0 and not cpu.nat_workers %}
  # NAT instance runs without dedicated cores (shares with Linux)
{% endif %}
}

plugins {
  plugin dpdk_plugin.so { disable }
  plugin memif_plugin.so { enable }
  plugin nat_plugin.so { enable }
}

statseg {
  socket-name /run/vpp/nat-stats.sock
}

logging {
  default-log-level debug
  default-syslog-log-level info
}
